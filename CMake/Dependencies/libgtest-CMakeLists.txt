cmake_minimum_required(VERSION 2.8)

project(libgtest-download NONE)

include(ExternalProject)

# updating to version 1.11.0
# https://stackoverflow.com/questions/69935158/dummy-may-be-used-uninitialized
# TLDR: gcc 11 cant compile gtest earlier than 1.11.0
ExternalProject_Add(libgtest-download
    GIT_REPOSITORY    https://github.com/google/googletest.git
    GIT_TAG           release-1.11.0
    PREFIX            ${CMAKE_CURRENT_BINARY_DIR}/build
    CMAKE_ARGS
        -DCMAKE_INSTALL_PREFIX=${OPEN_SRC_INSTALL_PREFIX}
        -DBUILD_GMOCK=0
        -Dgtest_force_shared_crt=ON
    BUILD_ALWAYS      TRUE
    TEST_COMMAND      ""
)
